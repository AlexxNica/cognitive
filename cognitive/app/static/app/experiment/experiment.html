<ng-include src="'static/app/common/header.html'"></ng-include>

<md-content ng-controller="ExperimentController as vm" style="background: whitesmoke">
  <md-content layout="row" layout-align="center start" style="background: whitesmoke">
    <div flex="20">
      <md-card>
        <md-card-content>
          <md-list>
            <h2 class="md-headline">{{ vm.workspaces[0].name }}</h2>
          </md-list>
        </md-card-content>
      </md-card>

      <md-card>
        <md-card-content>
          <md-input-container flex>
            <label>Components</label>
            <input ng-model="vm.search_components">
          </md-input-container>
          <md-list>
            <md-list-item class="md-line" layout-fill ng-repeat="component in vm.components | filter:vm.search_components" ng-click="vm.showComponentCreationDialog($event, $index)" component="{{component.type}}">
              <span flex="20">
                <i class="{{component.icon_class}}"></i>
              </span>
              <span>{{ component.name }}</span>
            </md-list-item>
          </md-list>
          <div id="component_arguments">
            <div class="detail left-menu-detail-cognitive">
              <ng-include src="vm.detail_template_url"></ng-include>
            </div>
          </div>
        </md-card-content>
      </md-card>
    </div>
    <div flex="75">
      <md-content layout="column" style="background: whitesmoke">
        <md-card style="height: calc(100vh - 180px);">
          <md-card-content class="card-content--svgboard">
            <!--Will not Support for workspace tabs, so ng-repead will be removed in the future. -->
            <div ng-repeat="workspace in vm.workspaces" heading="{{workspace.name}}" workspace="{{workspace.id}}" ng-click="workspace[$index].active = true" active="workspace.active" style="height: 100%">

              <svg class="root" workspace="{{workspace.id}}" style="width:100%; height:100%;" ng-click="vm.clickNone()">
                <g class="layer layer-0" workspace="{{workspace.id}}"></g>
                <g class="layer layer-1" workspace="{{workspace.id}}"></g>
                <g class="layer layer-2" workspace="{{workspace.id}}">
                  <g ng-repeat="edge in workspace.edges|filter:edge.workspace_id=workspace.id">
                    <g cognitive-edge="" to="{{edge.to}}" from="{{edge.from}}" workspace="workspace.id"></g>
                  </g>
                </g>
                <g class="layer layer-3" workspace="{{workspace.id}}">
                  <g ng-repeat="node in workspace.nodes">
                    <g cognitive-node="">
                    </g>
                  </g>
                </g>
                <g class="layer layer-4" workspace="{{workspace.id}}"></g>
              </svg>

            </div>
          </md-card-content>
        </md-card>
        <md-card layout="row" layout-align="center center">
          <md-button class="md-primary md-hue-1" ng-click="vm.run()">
            <ng-md-icon icon="play_circle_outline" style="fill: steelblue;" size="27pt"></ng-md-icon>
            <span>RUN</span>
          </md-button>
          <md-button class="md-primary md-hue-1" ng-click="vm.show()">
            <ng-md-icon icon="equalizer" style="fill: steelblue;" size="27pt"></ng-md-icon>
            <span>SHOW</span>
          </md-button>
        </md-card>
      </md-content>
    </div>
  </md-content>
  <div class="messages">
    <div ng-include="'/static/app/common/message.html'"></div>
  </div>
</md-content>
